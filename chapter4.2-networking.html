<!DOCTYPE HTML>
<html lang="en" class="latte sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Networking - The Linux Desktop Guide</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./theme/catppuccin.css">
        <link rel="stylesheet" href="./theme/last-changed.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "latte";
            const default_dark_theme = "frappe";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('latte')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Linux Desktop Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="networking"><a class="header" href="#networking">Networking</a></h2>
<p>Networkmanager is the default in most Linux distros. Systemd has built in networking functions, but they are terrible to configure. This is why everyone uses networkmanager package for Networking in Linux. It has two absolutely amazing tools <code>nmcli</code> and <code>nmtui</code>.</p>
<ul>
<li><code>nmcli</code> is a command line tool that allows you to manage your network connections. You can use it to connect to Wi-Fi networks, configure Ethernet connections, and manage VPNs.</li>
<li><code>nmtui</code> is a text-based user interface that allows you to manage your network connections. It is a bit easier to use than <code>nmcli</code>, but it is not as powerful.</li>
</ul>
<h3 id="dhcp"><a class="header" href="#dhcp">DHCP</a></h3>
<p>DHCP Client to automatically get IP address and other network configuration settings from a DHCP server. Most Linux distributions come with a DHCP client pre-installed, so you don't need to install anything extra. To use DHCP, simply configure your network interface to use DHCP in the network settings. However, there are several DHCP clients available for Linux, including:</p>
<ul>
<li><code>dhclient</code>: This is the most common DHCP client and is included in most Linux distributions. Its rather slow, but it works.</li>
<li><code>dhcpcd</code>: This is a lightweight DHCP client that is full featured with many options. Its fast and works well.</li>
<li><code>systemd-networkd</code>: This is a systemd component that can be used to manage network interfaces and DHCP. Its fast and works well, but its also very difficult to configure.</li>
<li>NetworkManager internal DHCP client: This is the DHCP client that is built into NetworkManager. Its fast and works well, but simpler than dhcpcd.</li>
</ul>
<h3 id="static-ip-configuration"><a class="header" href="#static-ip-configuration">Static IP Configuration</a></h3>
<p>To configure a static IP address on a Linux system, you can use the <code>nmcli</code> or <code>nmtui</code> tools provided by NetworkManager. Here are the steps to configure a static IP address using <code>nmcli</code>:</p>
<ol>
<li>Open a terminal.</li>
<li>List your network interfaces to identify the one you want to configure:
<pre><code class="language-bash">nmcli device status
</code></pre>
</li>
<li>Use the following command to set a static IP address, replacing <code>eth0</code> with your interface name, and <code>&lt;IP_ADDRESS&gt;</code> with the desired static IP address:
<pre><code class="language-bash">nmcli con mod eth0 ipv4.addresses &lt;IP_ADDRESS&gt;/24
nmcli con mod eth0 ipv4.gateway &lt;GATEWAY_IP&gt;
nmcli con mod eth0 ipv4.dns &lt;DNS_IP&gt;
nmcli con mod eth0 ipv4.method manual
</code></pre>
</li>
<li>Finally, restart the network connection to apply the changes:
<pre><code class="language-bash">nmcli con down eth0 &amp;&amp; nmcli con up eth0
</code></pre>
</li>
<li>For persistent configuration through reboots, ensure that the connection profile is set to autoconnect:
<pre><code class="language-bash">nmcli con mod eth0 connection.autoconnect yes
</code></pre>
</li>
</ol>
<h3 id="dns-configuration"><a class="header" href="#dns-configuration">DNS Configuration</a></h3>
<p>DNS (Domain Name System) is used to resolve domain names to IP addresses. By default, most Linux distributions use <code>systemd-resolved</code> for DNS resolution. You can configure DNS settings using <code>nmcli</code> or <code>nmtui</code>. Here are the steps to configure DNS settings using <code>nmcli</code>:</p>
<ol>
<li>Open a terminal.</li>
<li>List your network connections to identify the one you want to configure:
<pre><code class="language-bash">nmcli con show
</code></pre>
</li>
<li>Use the following command to set the DNS server, replacing <code>eth0</code> with your connection name, and <code>&lt;DNS_IP&gt;</code> with the desired DNS server IP address:
<pre><code class="language-bash">nmcli con mod eth0 ipv4.dns &lt;DNS_IP&gt;
</code></pre>
</li>
<li>Restart the network connection to apply the changes:
<pre><code class="language-bash">nmcli con down eth0 &amp;&amp; nmcli con up eth0
</code></pre>
</li>
</ol>
<h2 id="managing-connections-with-nmtui"><a class="header" href="#managing-connections-with-nmtui">Managing Connections with nmtui</a></h2>
<p><code>nmtui</code> is a text-based user interface for managing network connections. It provides a simple way to configure network settings without using the command line. Here are the steps to manage connections using <code>nmtui</code>:</p>
<ol>
<li>Open a terminal.</li>
<li>Type <code>nmtui</code> and press Enter to launch the interface.</li>
<li>Use the arrow keys to navigate the menu and select "Edit a connection".</li>
<li>Select the connection you want to edit and press Enter.</li>
<li>Use the arrow keys to navigate the fields and make changes as needed.</li>
<li>Press Tab to navigate to the "OK" button and press Enter to save your changes.</li>
<li>Press Tab to navigate to the "Back" button and press Enter to return to the main menu.</li>
<li>Select "Activate a connection" to activate the modified connection.</li>
<li>Press Tab to navigate to the "Quit" button and press Enter to exit <code>nmtui</code>.</li>
</ol>
<p><em>Note:Persistent configuration through reboots is automatic with <code>nmtui</code>, as it modifies the NetworkManager profiles directly.</em></p>
<h2 id="creating-a-bridge-with-nmcli"><a class="header" href="#creating-a-bridge-with-nmcli">Creating a Bridge with nmcli</a></h2>
<p>A network bridge is a virtual network device that allows you to connect multiple network interfaces together. This is useful for creating a virtual network or for connecting multiple physical networks together. Here are the steps to create a bridge using <code>nmcli</code>:</p>
<ol>
<li>Open a terminal.</li>
<li>Create a new bridge connection:
<pre><code class="language-bash">nmcli con add type bridge ifname br0
</code></pre>
</li>
<li>Add a network interface to the bridge, replacing <code>eth0</code> with the name of your network interface:
<pre><code class="language-bash">nmcli con add type bridge-slave ifname eth0 master br0
</code></pre>
</li>
<li>Configure the bridge with a static IP address, replacing <code>&lt;IP_ADDRESS&gt;</code>, <code>&lt;GATEWAY_IP&gt;</code>, and <code>&lt;DNS_IP&gt;</code> with the desired values:
<pre><code class="language-bash">nmcli con mod br0 ipv4.addresses &lt;IP_ADDRESS&gt;/24
nmcli con mod br0 ipv4.gateway &lt;GATEWAY_IP&gt;
nmcli con mod br0 ipv4.dns &lt;DNS_IP&gt;
nmcli con mod br0 ipv4.method manual
</code></pre>
or to use DHCP:
<pre><code class="language-bash">nmcli con mod br0 ipv4.method auto
</code></pre>
</li>
<li>Activate the bridge connection:
<pre><code class="language-bash">nmcli con up br0
</code></pre>
</li>
</ol>
<h3 id="adding-bridge-to-virtual-machines-with-virsh"><a class="header" href="#adding-bridge-to-virtual-machines-with-virsh">Adding bridge to virtual machines with virsh</a></h3>
<p>To add the bridge to a virtual machine using <code>virsh</code> globally, you can edit the default network configuration file. Here are the steps:</p>
<p>create a new XML file for the bridge network configuration, for example, <code>bridge-network.xml</code>:</p>
<pre><code class="language-xml">&lt;network&gt;
  &lt;name&gt;br0net&lt;/name&gt;
  &lt;forward mode='bridge'/&gt;
  &lt;bridge name='br0'/&gt;
&lt;/network&gt;
</code></pre>
<p><em>Note: the XML file can be anywhere and when you use <code>net-define</code> it will copy it to your libvirt network directory.</em></p>
<p>Define the new network using the XML file:</p>
<pre><code class="language-bash">sudo virsh net-define bridge-network.xml
</code></pre>
<p>Start the new network:</p>
<pre><code class="language-bash">sudo virsh net-start br0net
</code></pre>
<p>Set the network to start automatically on boot:</p>
<pre><code class="language-bash">sudo virsh net-autostart br0net
</code></pre>
<h2 id="troubleshooting-network-issues"><a class="header" href="#troubleshooting-network-issues">Troubleshooting Network Issues</a></h2>
<p>There is a ton of fragmentation in Linux networking, so troubleshooting can be difficult. Here are some common tools and commands that can help you troubleshoot network issues:</p>
<ul>
<li><code>ping</code>: This command is used to test connectivity to a remote host. You can use it to check if a host is reachable and to measure the round-trip time for packets.</li>
<li><code>traceroute</code>: This command is used to trace the route that packets take to reach a remote host. It can help you identify where packets are being dropped or delayed.</li>
<li><code>ifconfig</code> or <code>ip addr</code>: These commands are used to display the network interfaces and their configuration. You can use them to check the IP address, subnet mask, and other settings for your network interfaces.</li>
<li><code>netstat</code> or <code>ss</code>: These commands are used to display network connections, routing tables, and interface statistics. You can use them to check for open ports, active connections, and other network-related information.</li>
<li><code>nmcli</code>: This command is used to manage NetworkManager connections. You can use it to check the status of your network connections, modify settings, and troubleshoot issues.</li>
<li><code>journalctl -u NetworkManager</code>: This command is used to view the logs for NetworkManager. You can use it to check for errors and other messages related to your network connections.</li>
<li><code>systemctl status NetworkManager</code>: This command is used to check the status of the NetworkManager service. You can use it to see if the service is running and to check for any errors.</li>
<li><code>resolvectl</code>: This command is used to manage DNS settings and view DNS resolution status. You can use it to check the current DNS servers and troubleshoot DNS-related issues.</li>
</ul>
<p>Disabling other network managers like <code>systemd-networkd</code>, <code>netplan</code>, <code>dhcpcd</code>, <code>dnsmasq</code>, <code>dhclient</code>, <code>systemd-resolved</code>, or <code>wicd</code> can also help resolve conflicts and ensure that NetworkManager functions correctly. These are other network management services that might interfere with NetworkManager if they are running simultaneously. DISABLE THEM.</p>
<footer id="last-change">Last change: 2025-09-12</footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="chapter4.1-systemd.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="chapter4.3-bluetooth.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="chapter4.1-systemd.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="chapter4.3-bluetooth.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
